name: Deploy to EC2
'on': [ push ]
     
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
      - name: Run Commands in a Specific Directory
        env:
          working-directory: 'https://github.com/elumalai-n/myrepository'
          branch: main
      - name: executing remote ssh commands using ssh key
        uses: appleboy/ssh-action@v1.0.0
        with:
          host: '${{ secrets.SSH_HOST }}'
          username: '${{ secrets.USER }}'
          key: '${{ secrets.SSH_PRIVATE_KEY }}'
          working-directory: '${{ secrets.WORK_DIR }}'
          timeout: 30s
          script: |
            mkdir elumalai
            sudo apt-get update
            sudo apt-get install node.js -y
            node -v

